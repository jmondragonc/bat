/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof module&&module.exports?module.exports=function(a,d){return void 0===d&&(d="undefined"!=typeof window?require("jquery"):require("jquery")(a)),b(d)}:b(window.jQuery)}(function(b){b.extend(b.FE.POPUP_TEMPLATES,{"embedly.insert":"[_BUTTONS_][_URL_LAYER_]","embedly.edit":"[_BUTTONS_]"}),b.extend(b.FE.DEFAULTS,{embedlyKey:null,embedlyInsertButtons:["embedlyBack","|"],embedlyEditButtons:["embedlyRemove"],embedlyScriptPath:"https://cdn.embedly.com/widgets/platform.js"}),b.FE.PLUGINS.embedly=function(X){function W(){X.events.on("html.processGet",O),X.events.$on(X.$el,"click touchend","div.fr-embedly",U),X.events.on("mousedown window.mousedown",G),X.events.on("window.touchmove",F),X.events.on("mouseup window.mouseup",H),X.events.on("commands.mousedown",function(c){c.parents(".fr-toolbar").length>0&&H()}),X.events.on("blur video.hideResizer commands.undo commands.redo element.dropped",function(){H(!0)}),X.events.on("element.beforeDrop",function(c){return c.hasClass("fr-embedly")?(c.html(c.attr("data-original-embed")),c):void 0}),X.events.on("keydown",function(f){var e=f.which;return !B||e!=b.FE.KEYCODE.BACKSPACE&&e!=b.FE.KEYCODE.DELETE?B&&e==b.FE.KEYCODE.ESC?(H(!0),f.preventDefault(),!1):B&&e!=b.FE.KEYCODE.F10&&!X.keys.isBrowserAction(f)?(f.preventDefault(),!1):void 0:(f.preventDefault(),I(),!1)},!0),X.events.on("toolbar.esc",function(){return B?(X.events.disableBlur(),X.events.focus(),!1):void 0},!0),X.events.on("toolbar.focusEditor",function(){return B?!1:void 0},!0),X.events.on("snapshot.after",function(d){var e=X.doc.createElement("div");e.innerHTML=d.html,O(e),d.html=e.innerHTML}),X.win.embedly("on","card.resize",function(e){var g=b(e),f=g.parents(".fr-embedly");f.attr("contenteditable",!1).attr("draggable",!0).css("height",g.height()).addClass("fr-draggable")}),N(!0)}function V(){if(!X.$wp){return !1}if("undefined"!=typeof embedly){W()}else{if(X.shared.embedlyLoaded||(X.shared.embedlyCallbacks=[]),X.shared.embedlyCallbacks.push(W),!X.shared.embedlyLoaded){X.shared.embedlyLoaded=!0;var c=X.doc.createElement("script");c.type="text/javascript",c.src=X.opts.embedlyScriptPath,c.innerText="",c.onload=function(){for(var d=0;d<X.shared.embedlyCallbacks.length;d++){X.shared.embedlyCallbacks[d]()}},X.doc.getElementsByTagName("head")[0].appendChild(c)}}}function U(c){B=b(this),P(),R()}function T(){var e="";if(X.opts.embedlyEditButtons.length>0){e+='<div class="fr-buttons">',e+=X.button.buildList(X.opts.embedlyEditButtons),e+="</div>";var g={buttons:e},f=X.popups.create("embedly.edit",g);return X.events.$on(X.$wp,"scroll.emebdly-edit",function(){B&&X.popups.isVisible("embedly.edit")&&(X.events.disableBlur(),S(B))}),f}return !1}function S(c){U.call(c.get(0))}function R(){var e=X.popups.get("embedly.edit");if(e||(e=T()),e){X.popups.setContainer("embedly.edit",X.$sc),X.popups.refresh("embedly.edit");var g=B.offset().left+B.outerWidth()/2,f=B.offset().top+B.outerHeight();X.popups.show("embedly.edit",g,f,B.outerHeight())}}function Q(){X.shared.$embedly_resizer?(A=X.shared.$embedly_resizer,a=X.shared.$embedly_overlay,X.events.on("destroy",function(){A.appendTo(b("body:first"))},!0)):(X.shared.$embedly_resizer=b('<div class="fr-embedly-resizer"></div>'),A=X.shared.$embedly_resizer,X.events.$on(A,"mousedown",function(c){c.stopPropagation()},!0)),X.events.on("shared.destroy",function(){A.html("").removeData().remove(),A=null},!0)}function P(){A||Q(),(X.$wp||X.$sc).append(A),A.data("instance",X),A.css("top",(X.opts.iframe?B.offset().top-1+X.$iframe.position().top:B.offset().top-X.$wp.offset().top-1)+X.$wp.scrollTop()).css("left",(X.opts.iframe?B.offset().left-1:B.offset().left-X.$wp.offset().left-1)+X.$wp.scrollLeft()).css("width",B.outerWidth()).css("height",B.height()).addClass("fr-active")}function O(e){if(e&&X.node.hasClass(e,"fr-embedly")){e.innerHTML=e.getAttribute("data-original-embed"),e.removeAttribute("draggable"),e.removeAttribute("contenteditable"),e.setAttribute("class",(e.getAttribute("class")||"").replace("fr-draggable",""))}else{if(e&&e.nodeType==Node.ELEMENT_NODE){for(var g=e.querySelectorAll(".fr-embedly"),f=0;f<g.length;f++){O(g[f])}}}}function N(g){if(g){return X.popups.onRefresh("embedly.insert",M),!0}var k="";X.opts.embedlyInsertButtons.length>0&&(k+='<div class="fr-buttons">',k+=X.button.buildList(X.opts.embedlyInsertButtons),k+="</div>");var j="";j='<div class="fr-embedly-layer fr-active fr-layer" id="fr-embedly-layer-'+X.id+'"><div class="fr-input-line"><input id="fr-embedly-layer-text-'+X.id+'" type="text" placeholder="'+X.language.translate("Paste in a URL to embed")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="embedlyInsert" tabIndex="2" role="button">'+X.language.translate("Insert")+"</button></div></div>";var i={buttons:k,url_layer:j},h=X.popups.create("embedly.insert",i);return h}function M(){var d=X.popups.get("embedly.insert"),e=d.find(".fr-embedly-layer input");e.val("").trigger("change")}function L(){var f=X.$tb.find('.fr-command[data-cmd="embedly"]'),i=X.popups.get("embedly.insert");if(i||(i=N()),!i.hasClass("fr-active")){if(X.popups.refresh("embedly.insert"),X.popups.setContainer("embedly.insert",X.$tb),f.is(":visible")){var h=f.offset().left+f.outerWidth()/2,g=f.offset().top+(X.opts.toolbarBottom?10:f.outerHeight()-10);X.popups.show("embedly.insert",h,g,f.outerHeight())}else{X.position.forSelection(i),X.popups.show("embedly.insert")}}}function K(){var d=X.popups.get("embedly.insert"),e=d.find(".fr-embedly-layer input");J(e.val())}function J(d){if(d.length){var e="<a href='"+d+"' class='embedly-card'"+(X.opts.embedlyKey?" data-card-key='"+X.opts.embedlyKey+"'":"")+"></a>";X.html.insert('<div class="fr-embedly fr-draggable" draggable="true" contenteditable="false" data-original-embed="'+e+'">'+e+"</div>"),X.popups.hideAll()}}function I(){if(B&&X.events.trigger("embedly.beforeRemove",[B])!==!1){var c=B;X.popups.hideAll(),H(!0),X.selection.setBefore(c.get(0))||X.selection.setAfter(c.get(0)),c.remove(),X.selection.restore(),X.html.fillEmptyBlocks(),X.undo.saveStep(),X.events.trigger("video.removed",[c])}}function H(c){B&&(E()||c===!0)&&(A.removeClass("fr-active"),X.toolbar.enable(),B.removeClass("fr-active"),B=null,F())}function G(){X.shared.embedly_exit_flag=!0}function F(){X.shared.embedly_exit_flag=!1}function E(){return X.shared.embedly_exit_flag}function D(){return B}function C(){B?(X.events.disableBlur(),B.trigger("click")):(X.events.disableBlur(),X.selection.restore(),X.events.enableBlur(),X.popups.hide("embedly.insert"),X.toolbar.showInline())}var B,A,a;return X.shared.embedly_exit_flag=!1,{_init:V,showInsertPopup:L,insert:K,remove:I,get:D,add:J,back:C}},b.FE.DefineIcon("embedly",{NAME:"share-alt"}),b.FE.RegisterCommand("embedly",{undo:!0,focus:!0,title:"Embed URL",popup:!0,callback:function(){this.popups.isVisible("embedly.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("embedly.insert")):this.embedly.showInsertPopup()},plugin:"embedly"}),b.FE.RegisterCommand("embedlyInsert",{undo:!0,focus:!0,callback:function(){this.embedly.insert()}}),b.FE.DefineIcon("embedlyRemove",{NAME:"trash"}),b.FE.RegisterCommand("embedlyRemove",{title:"Remove",undo:!1,callback:function(){this.embedly.remove()}}),b.FE.DefineIcon("embedlyBack",{NAME:"arrow-left"}),b.FE.RegisterCommand("embedlyBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.embedly.back()},refresh:function(d){var c=this.embedly.get();c||this.opts.toolbarInline?(d.removeClass("fr-hidden"),d.next(".fr-separator").removeClass("fr-hidden")):(d.addClass("fr-hidden"),d.next(".fr-separator").addClass("fr-hidden"))}})});