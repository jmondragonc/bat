/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof module&&module.exports?module.exports=function(a,d){return void 0===d&&(d="undefined"!=typeof window?require("jquery"):require("jquery")(a)),b(d)}:b(window.jQuery)}(function(b){b.extend(b.FE.DEFAULTS,{dragInline:!0}),b.FE.PLUGINS.draggable=function(z){function y(d){return d.originalEvent&&d.originalEvent.target&&d.originalEvent.target.nodeType==Node.TEXT_NODE?!0:(d.target&&"A"==d.target.tagName&&1==d.target.childNodes.length&&"IMG"==d.target.childNodes[0].tagName&&(d.target=d.target.childNodes[0]),b(d.target).hasClass("fr-draggable")?(z.undo.canDo()||z.undo.saveStep(),z.opts.dragInline?z.$el.attr("contenteditable",!0):z.$el.attr("contenteditable",!1),z.opts.toolbarInline&&z.toolbar.hide(),b(d.target).addClass("fr-dragging"),z.browser.msie||z.browser.edge||z.selection.clear(),void d.originalEvent.dataTransfer.setData("text","Froala")):(d.preventDefault(),!1))}function x(c){return !(c&&("HTML"==c.tagName||"BODY"==c.tagName||z.node.isElement(c)))}function w(e,g,f){z.opts.iframe&&(e+=z.$iframe.offset().top,g+=z.$iframe.offset().left),a.offset().top!=e&&a.css("top",e),a.offset().left!=g&&a.css("left",g),a.width()!=f&&a.css("width",f)}function v(G){var F=z.doc.elementFromPoint(G.originalEvent.pageX-z.win.pageXOffset,G.originalEvent.pageY-z.win.pageYOffset);if(!x(F)){for(var E=0,D=F;!x(D)&&D==F&&G.originalEvent.pageY-z.win.pageYOffset-E>0;){E++,D=z.doc.elementFromPoint(G.originalEvent.pageX-z.win.pageXOffset,G.originalEvent.pageY-z.win.pageYOffset-E)}(!x(D)||a&&0===z.$el.find(D).length&&D!=a.get(0))&&(D=null);for(var C=0,B=F;!x(B)&&B==F&&G.originalEvent.pageY-z.win.pageYOffset+C<b(z.doc).height();){C++,B=z.doc.elementFromPoint(G.originalEvent.pageX-z.win.pageXOffset,G.originalEvent.pageY-z.win.pageYOffset+C)}(!x(B)||a&&0===z.$el.find(B).length&&B!=a.get(0))&&(B=null),F=null==B&&D?D:B&&null==D?B:B&&D?C>E?D:B:null}if(b(F).hasClass("fr-drag-helper")){return !1}if(F&&!z.node.isBlock(F)&&(F=z.node.blockParent(F)),F&&["TD","TH","TR","THEAD","TBODY"].indexOf(F.tagName)>=0&&(F=b(F).parents("table").get(0)),F&&["LI"].indexOf(F.tagName)>=0&&(F=b(F).parents("UL, OL").get(0)),F&&!b(F).hasClass("fr-drag-helper")){a||(b.FE.$draggable_helper||(b.FE.$draggable_helper=b('<div class="fr-drag-helper"></div>')),a=b.FE.$draggable_helper,z.events.on("shared.destroy",function(){a.html("").removeData().remove(),a=null},!0));var A,n=G.originalEvent.pageY;A=n<b(F).offset().top+b(F).outerHeight()/2?!0:!1;var e=b(F),d=0;A||0!==e.next().length?(A||(e=e.next()),"before"==a.data("fr-position")&&e.is(a.data("fr-tag"))||(e.prev().length>0&&(d=parseFloat(e.prev().css("margin-bottom"))||0),d=Math.max(d,parseFloat(e.css("margin-top"))||0),w(e.offset().top-d/2-z.$box.offset().top,e.offset().left-z.win.pageXOffset-z.$box.offset().left,e.width()),a.data("fr-position","before"))):"after"==a.data("fr-position")&&e.is(a.data("fr-tag"))||(d=parseFloat(e.css("margin-bottom"))||0,w(e.offset().top+b(F).height()+d/2-z.$box.offset().top,e.offset().left-z.win.pageXOffset-z.$box.offset().left,e.width()),a.data("fr-position","after")),a.data("fr-tag",e),a.addClass("fr-visible"),a.appendTo(z.$box)}else{a&&z.$box.find(a).length>0&&a.removeClass("fr-visible")}}function u(c){c.originalEvent.dataTransfer.dropEffect="move",z.opts.dragInline?r()||!z.browser.msie&&!z.browser.edge||c.preventDefault():(c.preventDefault(),v(c))}function t(c){c.originalEvent.dataTransfer.dropEffect="move",z.opts.dragInline||c.preventDefault()}function s(d){z.$el.attr("contenteditable",!0);var e=z.$el.find(".fr-dragging");a&&a.hasClass("fr-visible")&&z.$box.find(a).length?q(d):e.length&&(d.preventDefault(),d.stopPropagation()),a&&z.$box.find(a).length&&a.removeClass("fr-visible"),e.removeClass("fr-dragging")}function r(){for(var d=null,e=0;e<b.FE.INSTANCES.length;e++){if(d=b.FE.INSTANCES[e].$el.find(".fr-dragging"),d.length){return d.get(0)}}}function q(D){for(var C,B,A=0;A<b.FE.INSTANCES.length;A++){if(C=b.FE.INSTANCES[A].$el.find(".fr-dragging"),C.length){B=b.FE.INSTANCES[A];break}}if(C.length){if(D.preventDefault(),D.stopPropagation(),a&&a.hasClass("fr-visible")&&z.$box.find(a).length){a.data("fr-tag")[a.data("fr-position")]('<span class="fr-marker"></span>'),a.removeClass("fr-visible")}else{var n=z.markers.insertAtPoint(D.originalEvent);if(n===!1){return !1}}if(C.removeClass("fr-dragging"),C=z.events.chainTrigger("element.beforeDrop",C),C===!1){return !1}var m=C;if(C.parent().is("A")&&1==C.parent().get(0).childNodes.length&&(m=C.parent()),z.core.isEmpty()){z.events.focus()}else{var l=z.$el.find(".fr-marker");l.replaceWith(b.FE.MARKERS),z.selection.restore()}if(B==z||z.undo.canDo()||z.undo.saveStep(),z.core.isEmpty()){z.$el.html(m)}else{var k=z.markers.insert();0===m.find(k).length?b(k).replaceWith(m):0===C.find(k).length&&b(k).replaceWith(C),C.after(b.FE.MARKERS),z.selection.restore()}return z.popups.hideAll(),z.selection.save(),z.$el.find(z.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),z.html.wrap(),z.html.fillEmptyBlocks(),z.selection.restore(),z.undo.saveStep(),z.opts.iframe&&z.size.syncIframe(),B!=z&&(B.popups.hideAll(),B.$el.find(B.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),B.html.wrap(),B.html.fillEmptyBlocks(),B.undo.saveStep(),B.events.trigger("element.dropped"),B.opts.iframe&&B.size.syncIframe()),z.events.trigger("element.dropped",[m]),!1}a&&a.removeClass("fr-visible"),z.undo.canDo()||z.undo.saveStep(),setTimeout(function(){z.undo.saveStep()},0)}function p(e){if(e&&"DIV"==e.tagName&&z.node.hasClass(e,"fr-drag-helper")){e.parentNode.removeChild(e)}else{if(e&&e.nodeType==Node.ELEMENT_NODE){for(var g=e.querySelectorAll("div.fr-drag-helper"),f=0;f<g.length;f++){g[f].parentNode.removeChild(g[f])}}}}function o(){z.opts.enter==b.FE.ENTER_BR&&(z.opts.dragInline=!0),z.events.on("dragstart",y,!0),z.events.on("dragover",u,!0),z.events.on("dragenter",t,!0),z.events.on("document.dragend",s,!0),z.events.on("document.drop",s,!0),z.events.on("drop",q,!0),z.events.on("html.processGet",p)}var a;return{_init:o}}});