/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof module&&module.exports?module.exports=function(a,d){return void 0===d&&(d="undefined"!=typeof window?require("jquery"):require("jquery")(a)),b(d)}:b(window.jQuery)}(function(b){if(b.extend(b.FE.DEFAULTS,{imageManagerLoadURL:"https://i.froala.com/load-files",imageManagerLoadMethod:"get",imageManagerLoadParams:{},imageManagerPreloader:null,imageManagerDeleteURL:"",imageManagerDeleteMethod:"post",imageManagerDeleteParams:{},imageManagerPageSize:12,imageManagerScrollOffset:20,imageManagerToggleTags:!0}),b.FE.PLUGINS.imageManager=function(aM){function aL(){if(!an){var e='<div class="fr-modal-head-line"><i class="fa fa-bars fr-modal-more fr-not-available" id="fr-modal-more-'+aM.sid+'" title="'+aM.language.translate("Tags")+'"></i><h4 data-text="true">'+aM.language.translate("Manage Images")+"</h4></div>";e+='<div class="fr-modal-tags" id="fr-modal-tags"></div>';var g;g=aM.opts.imageManagerPreloader?'<img class="fr-preloader" id="fr-preloader" alt="'+aM.language.translate("Loading")+'.." src="'+aM.opts.imageManagerPreloader+'" style="display: none;">':'<span class="fr-preloader" id="fr-preloader" style="display: none;">'+aM.language.translate("Loading")+"</span>",g+='<div class="fr-image-list" id="fr-image-list"></div>';var f=aM.modals.create(ac,e,g);an=f.$modal,am=f.$head,al=f.$body}an.data("current-image",aM.image.get()),aM.modals.show(ac),ak||ap(),aH()}function aK(){aM.modals.hide(ac)}function aJ(){var c=b(window).outerWidth();return 768>c?2:1200>c?3:4}function aI(){aj.empty();for(var c=0;ad>c;c++){aj.append('<div class="fr-list-column"></div>')}}function aH(){ak.show(),aj.find(".fr-list-column").empty(),aM.opts.imageManagerLoadURL?b.ajax({url:aM.opts.imageManagerLoadURL,method:aM.opts.imageManagerLoadMethod,data:aM.opts.imageManagerLoadParams,dataType:"json",crossDomain:aM.opts.requestWithCORS,xhrFields:{withCredentials:aM.opts.requestWithCredentials},headers:aM.opts.requestHeaders}).done(function(e,g,f){aM.events.trigger("imageManager.imagesLoaded",[e]),aG(e,f.response),ak.hide()}).fail(function(){var c=this.xhr();av(aa,c.response||c.responseText)}):av(Z)}function aG(e,d){try{aj.find(".fr-list-column").empty(),ag=0,af=0,ae=0,ah=e,aF()}catch(f){av(Y,d)}}function aF(){if(af<ah.length&&(aj.outerHeight()<=al.outerHeight()+aM.opts.imageManagerScrollOffset||al.scrollTop()+aM.opts.imageManagerScrollOffset>aj.outerHeight()-al.outerHeight())){ag++;for(var c=aM.opts.imageManagerPageSize*(ag-1);c<Math.min(ah.length,aM.opts.imageManagerPageSize*ag);c++){aE(ah[c])}}}function aE(h){var g=new Image,f=b('<div class="fr-image-container fr-empty fr-image-'+ae+++'" data-loading="'+aM.language.translate("Loading")+'.." data-deleting="'+aM.language.translate("Deleting")+'..">');aA(!1),g.onload=function(){f.height(Math.floor(f.width()/g.width*g.height));var i=b("<img/>");if(h.thumb){i.attr("src",h.thumb)}else{if(av(X,h),!h.url){return av(W,h),!1}i.attr("src",h.url)}if(h.url&&i.attr("data-url",h.url),h.tag){if(am.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"),am.find(".fr-modal-tags").show(),h.tag.indexOf(",")>=0){for(var e=h.tag.split(","),d=0;d<e.length;d++){e[d]=e[d].trim(),0===ai.find('a[title="'+e[d]+'"]').length&&ai.append('<a role="button" title="'+e[d]+'">'+e[d]+"</a>")}i.attr("data-tag",e.join())}else{0===ai.find('a[title="'+h.tag.trim()+'"]').length&&ai.append('<a role="button" title="'+h.tag.trim()+'">'+h.tag.trim()+"</a>"),i.attr("data-tag",h.tag.trim())}}h.name&&i.attr("alt",h.name);for(var c in h){h.hasOwnProperty(c)&&"thumb"!=c&&"url"!=c&&"tag"!=c&&i.attr("data-"+c,h[c])}f.append(i).append(b(aM.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title",aM.language.translate("Delete"))).append(b(aM.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title",aM.language.translate("Insert"))),ai.find(".fr-selected-tag").each(function(k,j){aq(i,j.text)||f.hide()}),i.on("load",function(){f.removeClass("fr-empty"),f.height("auto"),af++;var j=aC(parseInt(i.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);aB(j),aA(!1),af%aM.opts.imageManagerPageSize===0&&aF()}),aM.events.trigger("imageManager.imageLoaded",[i])},g.onerror=function(){af++,f.remove();var c=aC(parseInt(f.attr("class").match(/fr-image-(\d+)/)[1],10)+1);aB(c),av(ab,h),af%aM.opts.imageManagerPageSize===0&&aF()},g.src=h.thumb||h.url,aD().append(f)}function aD(){var d,e;return aj.find(".fr-list-column").each(function(h,g){var c=b(g);0===h?(e=c.outerHeight(),d=c):c.outerHeight()<e&&(e=c.outerHeight(),d=c)}),d}function aC(f){void 0===f&&(f=0);for(var i=[],h=ae-1;h>=f;h--){var g=aj.find(".fr-image-"+h);g.length&&(i.push(g),b('<div id="fr-image-hidden-container">').append(g),aj.find(".fr-image-"+h).remove())}return i}function aB(d){for(var c=d.length-1;c>=0;c--){aD().append(d[c])}}function aA(e){if(void 0===e&&(e=!0),!an.is(":visible")){return !0}var g=aJ();if(g!=ad){ad=g;var f=aC();aI(),aB(f)}aM.modals.resize(ac),e&&aF()}function az(f){var e={},h=f.data();for(var g in h){h.hasOwnProperty(g)&&"url"!=g&&"tag"!=g&&(e[g]=h[g])}return e}function ay(p){var o=b(p.currentTarget).siblings("img"),n=an.data("instance")||aM,m=an.data("current-image");if(aM.modals.hide(ac),n.image.showProgressBar(),m){m.data("fr-old-src",m.attr("src")),m.trigger("click")}else{n.events.focus(!0),n.selection.restore();var l=n.position.getBoundingRect(),k=l.left+l.width/2+b(aM.doc).scrollLeft(),j=l.top+l.height+b(aM.doc).scrollTop();n.popups.setContainer("image.insert",aM.$sc),n.popups.show("image.insert",k,j)}n.image.insert(o.data("url"),!1,az(o),m)}function ax(){an.find("#fr-modal-tags > a").each(function(){0===an.find('#fr-image-list [data-tag*="'+b(this).text()+'"]').length&&b(this).removeClass("fr-selected-tag").hide()}),at()}function aw(h){var g=b(h.currentTarget).siblings("img"),f=aM.language.translate("Are you sure? Image will be deleted.");confirm(f)&&(aM.opts.imageManagerDeleteURL?aM.events.trigger("imageManager.beforeDeleteImage",[g])!==!1&&(g.parent().addClass("fr-image-deleting"),b.ajax({method:aM.opts.imageManagerDeleteMethod,url:aM.opts.imageManagerDeleteURL,data:b.extend(b.extend({src:g.attr("src")},az(g)),aM.opts.imageManagerDeleteParams),crossDomain:aM.opts.requestWithCORS,xhrFields:{withCredentials:aM.opts.requestWithCredentials},headers:aM.opts.requestHeaders}).done(function(d){aM.events.trigger("imageManager.imageDeleted",[d]);var e=aC(parseInt(g.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);g.parent().remove(),aB(e),ax(),aA(!0)}).fail(function(c){av(V,c.response||c.responseText)})):av(U))}function av(f,e){f>=10&&20>f?ak.hide():f>=20&&30>f&&b(".fr-image-deleting").removeClass("fr-image-deleting"),aM.events.trigger("imageManager.error",[{code:f,message:a[f]},e])}function au(){var d=am.find(".fr-modal-head-line").outerHeight(),c=ai.outerHeight();am.toggleClass("fr-show-tags"),am.hasClass("fr-show-tags")?(am.css("height",d+c),ai.find("a").css("opacity",1)):(am.css("height",d),ai.find("a").css("opacity",0))}function at(){var d=ai.find(".fr-selected-tag");d.length>0?(aj.find("img").parent().show(),d.each(function(f,g){aj.find("img").each(function(c,i){var h=b(i);aq(h,g.text)||h.parent().hide()})})):aj.find("img").parent().show();var e=aC();aB(e),aF()}function ar(f){f.preventDefault();var e=b(f.currentTarget);e.toggleClass("fr-selected-tag"),aM.opts.imageManagerToggleTags&&e.siblings("a").removeClass("fr-selected-tag"),at()}function aq(f,e){for(var h=(f.attr("data-tag")||"").split(","),g=0;g<h.length;g++){if(h[g]==e){return !0}}return !1}function ap(){ak=an.find("#fr-preloader"),aj=an.find("#fr-image-list"),ai=an.find("#fr-modal-tags"),ad=aJ(),aI(),am.css("height",am.find(".fr-modal-head-line").outerHeight()),aM.events.$on(b(aM.o_win),"resize",function(){aA(ah?!0:!1)}),aM.helpers.isMobile()&&(aM.events.bindClick(aj,"div.fr-image-container",function(c){an.find(".fr-mobile-selected").removeClass("fr-mobile-selected"),b(c.currentTarget).addClass("fr-mobile-selected")}),an.on(aM._mousedown,function(){an.find(".fr-mobile-selected").removeClass("fr-mobile-selected")})),aM.events.bindClick(aj,".fr-insert-img",ay),aM.events.bindClick(aj,".fr-delete-img",aw),an.on(aM._mousedown+" "+aM._mouseup,function(c){c.stopPropagation()}),an.on(aM._mousedown,"*",function(){aM.events.disableBlur()}),al.on("scroll",aF),aM.events.bindClick(an,"i#fr-modal-more-"+aM.sid,au),aM.events.bindClick(ai,"a",ar)}function ao(){return aM.$wp||"IMG"==aM.el.tagName?void 0:!1}var an,am,al,ak,aj,ai,ah,ag,af,ae,ad,ac="image_manager",ab=10,aa=11,Z=12,Y=13,X=14,W=15,V=21,U=22,a={};return a[ab]="Image cannot be loaded from the passed link.",a[aa]="Error during load images request.",a[Z]="Missing imageManagerLoadURL option.",a[Y]="Parsing load response failed.",a[X]="Missing image thumb.",a[W]="Missing image URL.",a[V]="Error during delete image request.",a[U]="Missing imageManagerDeleteURL option.",{require:["image"],_init:ao,show:aL,hide:aK}},!b.FE.PLUGINS.image){throw new Error("Image manager plugin requires image plugin.")}b.FE.DEFAULTS.imageInsertButtons.push("imageManager"),b.FE.RegisterCommand("imageManager",{title:"Browse",undo:!1,focus:!1,modal:!0,callback:function(){this.imageManager.show()},plugin:"imageManager"}),b.FE.DefineIcon("imageManager",{NAME:"folder"}),b.FE.DefineIcon("imageManagerInsert",{NAME:"plus"}),b.FE.DefineIcon("imageManagerDelete",{NAME:"trash"})});