/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof module&&module.exports?module.exports=function(a,d){return void 0===d&&(d="undefined"!=typeof window?require("jquery"):require("jquery")(a)),b(d)}:b(window.jQuery)}(function(b){b.extend(b.FE.POPUP_TEMPLATES,{"file.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]"}),b.extend(b.FE.DEFAULTS,{fileUpload:!0,fileUploadURL:"https://i.froala.com/upload",fileUploadParam:"file",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:"POST",fileMaxSize:10485760,fileAllowedTypes:["*"],fileInsertButtons:["fileBack","|"],fileUseSelectedText:!1}),b.FE.PLUGINS.file=function(an){function am(){var e=an.$tb.find('.fr-command[data-cmd="insertFile"]'),i=an.popups.get("file.insert");if(i||(i=T()),ak(),!i.hasClass("fr-active")){if(an.popups.refresh("file.insert"),an.popups.setContainer("file.insert",an.$tb),e.is(":visible")){var h=e.offset().left+e.outerWidth()/2,g=e.offset().top+(an.opts.toolbarBottom?10:e.outerHeight()-10);an.popups.show("file.insert",h,g,e.outerHeight())}else{an.position.forSelection(i),an.popups.show("file.insert")}}}function al(){var c=an.popups.get("file.insert");c||(c=T()),c.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),c.find(".fr-file-progress-bar-layer").addClass("fr-active"),c.find(".fr-buttons").hide(),aj(an.language.translate("Uploading"),0)}function ak(d){var e=an.popups.get("file.insert");e&&(e.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),e.find(".fr-file-progress-bar-layer").removeClass("fr-active"),e.find(".fr-buttons").show(),d&&(an.events.focus(),an.popups.hide("file.insert")))}function aj(f,i){var h=an.popups.get("file.insert");if(h){var g=h.find(".fr-file-progress-bar-layer");g.find("h3").text(f+(i?" "+i+"%":"")),g.removeClass("fr-error"),i?(g.find("div").removeClass("fr-indeterminate"),g.find("div > span").css("width",i+"%")):g.find("div").addClass("fr-indeterminate")}}function ai(d){al();var i=an.popups.get("file.insert"),h=i.find(".fr-file-progress-bar-layer");h.addClass("fr-error");var g=h.find("h3");g.text(d),an.events.disableBlur(),g.focus()}function ah(f,i,h){an.edit.on(),an.events.focus(!0),an.selection.restore(),an.opts.fileUseSelectedText&&an.selection.text().length&&(i=an.selection.text()),an.html.insert('<a href="'+f+'" target="_blank" id="fr-inserted-file" class="fr-file">'+i+"</a>");var g=an.$el.find("#fr-inserted-file");g.removeAttr("id"),an.popups.hide("file.insert"),an.undo.saveStep(),J(),an.events.trigger("file.inserted",[g,h])}function ag(e){try{if(an.events.trigger("file.uploaded",[e],!0)===!1){return an.edit.on(),!1}var g=JSON.parse(e);return g.link?g:(ab(Y,e),!1)}catch(f){return ab(U,e),!1}}function af(j){try{var i=b(j).find("Location").text(),h=b(j).find("Key").text();return an.events.trigger("file.uploadedToS3",[i,h,j],!0)===!1?(an.edit.on(),!1):i}catch(g){return ab(U,j),!1}}function ae(i){var q=this.status,p=this.response,o=this.responseXML,n=this.responseText;try{if(an.opts.fileUploadToS3){if(201==q){var m=af(o);m&&ah(m,i,p||o)}else{ab(U,p||o)}}else{if(q>=200&&300>q){var j=ag(n);j&&ah(j.link,i,p||n)}else{ab(W,p||n)}}}catch(h){ab(U,p||n)}}function ad(){ab(U,this.response||this.responseText||this.responseXML)}function ac(d){if(d.lengthComputable){var e=d.loaded/d.total*100|0;aj(an.language.translate("Uploading"),e)}}function ab(d,e){an.edit.on(),ai(an.language.translate("Something went wrong. Please try again.")),an.events.trigger("file.error",[{code:d,message:M[d]},e])}function aa(){an.edit.on(),ak(!0)}function Z(d){if("undefined"!=typeof d&&d.length>0){if(an.events.trigger("file.beforeUpload",[d])===!1){return !1}var o=d[0];if(o.size>an.opts.fileMaxSize){return ab(S),!1}if(an.opts.fileAllowedTypes.indexOf("*")<0&&an.opts.fileAllowedTypes.indexOf(o.type.replace(/file\//g,""))<0){return ab(Q),!1}var n;if(an.drag_support.formdata&&(n=an.drag_support.formdata?new FormData:null),n){var m;if(an.opts.fileUploadToS3!==!1){n.append("key",an.opts.fileUploadToS3.keyStart+(new Date).getTime()+"-"+(o.name||"untitled")),n.append("success_action_status","201"),n.append("X-Requested-With","xhr"),n.append("Content-Type",o.type);for(m in an.opts.fileUploadToS3.params){an.opts.fileUploadToS3.params.hasOwnProperty(m)&&n.append(m,an.opts.fileUploadToS3.params[m])}}for(m in an.opts.fileUploadParams){an.opts.fileUploadParams.hasOwnProperty(m)&&n.append(m,an.opts.fileUploadParams[m])}n.append(an.opts.fileUploadParam,o);var l=an.opts.fileUploadURL;an.opts.fileUploadToS3&&(l=an.opts.fileUploadToS3.uploadURL?an.opts.fileUploadToS3.uploadURL:"https://"+an.opts.fileUploadToS3.region+".amazonaws.com/"+an.opts.fileUploadToS3.bucket);var k=an.core.getXHR(l,an.opts.fileUploadMethod);k.onload=function(){ae.call(k,o.name)},k.onerror=ad,k.upload.onprogress=ac,k.onabort=aa,al();var j=an.popups.get("file.insert");j&&j.off("abortUpload").on("abortUpload",function(){4!=k.readyState&&k.abort()}),k.send(n)}}}function X(d){an.events.$on(d,"dragover dragenter",".fr-file-upload-layer",function(){return b(this).addClass("fr-drop"),!1},!0),an.events.$on(d,"dragleave dragend",".fr-file-upload-layer",function(){return b(this).removeClass("fr-drop"),!1},!0),an.events.$on(d,"drop",".fr-file-upload-layer",function(h){h.preventDefault(),h.stopPropagation(),b(this).removeClass("fr-drop");var g=h.originalEvent.dataTransfer;if(g&&g.files){var c=d.data("instance")||an;c.file.upload(g.files)}},!0),an.helpers.isIOS()&&an.events.$on(d,"touchstart",'.fr-file-upload-layer input[type="file"]',function(){b(this).trigger("click")}),an.events.$on(d,"change",'.fr-file-upload-layer input[type="file"]',function(){if(this.files){var c=d.data("instance")||an;c.file.upload(this.files)}b(this).val("")},!0)}function V(){ak()}function T(h){if(h){return an.popups.onHide("file.insert",V),!0}var m="";an.opts.fileUpload||an.opts.fileInsertButtons.splice(an.opts.fileInsertButtons.indexOf("fileUpload"),1),m='<div class="fr-buttons">'+an.button.buildList(an.opts.fileInsertButtons)+"</div>";var l="";an.opts.fileUpload&&(l='<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'+an.id+'"><strong>'+an.language.translate("Drop file")+"</strong><br>("+an.language.translate("or click")+')<div class="fr-form"><input type="file" name="'+an.opts.fileUploadParam+'" accept="/*" tabIndex="-1" aria-labelledby="fr-file-upload-layer-'+an.id+'" role="button"></div></div>');var k='<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>',j={buttons:m,upload_layer:l,progress_bar:k},i=an.popups.create("file.insert",j);return X(i),i}function R(c){an.node.hasClass(c,"fr-file")}function P(j){var i=j.originalEvent.dataTransfer;if(i&&i.files&&i.files.length){var h=i.files[0];if(h&&"undefined"!=typeof h.type){if(h.type.indexOf("image")<0){if(!an.opts.fileUpload){return j.preventDefault(),j.stopPropagation(),!1}an.markers.remove(),an.markers.insertAtPoint(j.originalEvent),an.$el.find(".fr-marker").replaceWith(b.FE.MARKERS),an.popups.hideAll();var d=an.popups.get("file.insert");return d||(d=T()),an.popups.setContainer("file.insert",an.$sc),an.popups.show("file.insert",j.originalEvent.pageX,j.originalEvent.pageY),al(),Z(i.files),j.preventDefault(),j.stopPropagation(),!1}}else{h.type.indexOf("image")<0&&(j.preventDefault(),j.stopPropagation())}}}function N(){an.events.on("drop",P),an.events.$on(an.$win,"keydown",function(h){var g=h.which,f=an.popups.get("file.insert");f&&g==b.FE.KEYCODE.ESC&&f.trigger("abortUpload")}),an.events.on("destroy",function(){var c=an.popups.get("file.insert");c&&c.trigger("abortUpload")})}function L(){an.events.disableBlur(),an.selection.restore(),an.events.enableBlur(),an.popups.hide("file.insert"),an.toolbar.showInline()}function J(){var e,g=Array.prototype.slice.call(an.el.querySelectorAll("a.fr-file")),f=[];for(e=0;e<g.length;e++){f.push(g[e].getAttribute("href"))}if(K){for(e=0;e<K.length;e++){f.indexOf(K[e].getAttribute("href"))<0&&an.events.trigger("file.unlink",[K[e]])}}K=g}function I(){N(),an.events.on("link.beforeRemove",R),an.$wp&&(J(),an.events.on("contentChanged",J)),T(!0)}var a=1,Y=2,W=3,U=4,S=5,Q=6,O=7,M={};M[a]="File cannot be loaded from the passed link.",M[Y]="No link in upload response.",M[W]="Error during file upload.",M[U]="Parsing response failed.",M[S]="File is too large.",M[Q]="File file type is invalid.",M[O]="Files can be uploaded only to same domain in IE 8 and IE 9.";var K;return{_init:I,showInsertPopup:am,upload:Z,insert:ah,back:L,hideProgressBar:ak}},b.FE.DefineIcon("insertFile",{NAME:"file-o",FA5NAME:"file"}),b.FE.RegisterCommand("insertFile",{title:"Upload File",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("file.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("file.insert")):this.file.showInsertPopup()},plugin:"file"}),b.FE.DefineIcon("fileBack",{NAME:"arrow-left"}),b.FE.RegisterCommand("fileBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(c){this.opts.toolbarInline?(c.removeClass("fr-hidden"),c.next(".fr-separator").removeClass("fr-hidden")):(c.addClass("fr-hidden"),c.next(".fr-separator").addClass("fr-hidden"))}}),b.FE.RegisterCommand("fileDismissError",{title:"OK",callback:function(){this.file.hideProgressBar(!0)}})});