window.onload=function(){var n=window.Cropper;var f=window.URL||window.webkitURL;var k=document.querySelector(".img-container");var m=k.getElementsByTagName("img").item(0);var c=document.getElementById("download");var i=document.getElementById("actions");var j=document.getElementById("dataX");var h=document.getElementById("dataY");var p=document.getElementById("dataHeight");var g=document.getElementById("dataWidth");var s=document.getElementById("dataRotate");var b=document.getElementById("dataScaleX");var a=document.getElementById("dataScaleY");var d={aspectRatio:16/9,preview:".img-preview",ready:function(u){console.log(u.type)},cropstart:function(u){console.log(u.type,u.detail.action)},cropmove:function(u){console.log(u.type,u.detail.action)},cropend:function(u){console.log(u.type,u.detail.action)},crop:function(v){var u=v.detail;console.log(v.type);j.value=Math.round(u.x);h.value=Math.round(u.y);p.value=Math.round(u.height);g.value=Math.round(u.width);s.value=typeof u.rotate!=="undefined"?u.rotate:"";b.value=typeof u.scaleX!=="undefined"?u.scaleX:"";a.value=typeof u.scaleY!=="undefined"?u.scaleY:""},zoom:function(u){console.log(u.type,u.detail.ratio)}};var e=new n(m,d);var l=m.src;var t="image/jpeg";var o="cropped.jpg";var r;$('[data-toggle="tooltip"]').tooltip();if(!document.createElement("canvas").getContext){$('button[data-method="getCroppedCanvas"]').prop("disabled",true)}if(typeof document.createElement("cropper").style.transition==="undefined"){$('button[data-method="rotate"]').prop("disabled",true);$('button[data-method="scale"]').prop("disabled",true)}if(typeof c.download==="undefined"){c.className+=" disabled"}i.querySelector(".docs-toggles").onchange=function(x){var A=x||window.event;var z=A.target||A.srcElement;var y;var u;var w;var v;if(!e){return}if(z.tagName.toLowerCase()==="label"){z=z.querySelector("input")}w=z.type==="checkbox";v=z.type==="radio";if(w||v){if(w){d[z.name]=z.checked;y=e.getCropBoxData();u=e.getCanvasData();d.ready=function(){console.log("ready");e.setCropBoxData(y).setCanvasData(u)}}else{d[z.name]=z.value;d.ready=function(){console.log("ready")}}e.destroy();e=new n(m,d)}};i.querySelector(".docs-buttons").onclick=function(w){var A=w||window.event;var z=A.target||A.srcElement;var y;var u;var v;var x;if(!e){return}while(z!==this){if(z.getAttribute("data-method")){break}z=z.parentNode}if(z===this||z.disabled||z.className.indexOf("disabled")>-1){return}x={method:z.getAttribute("data-method"),target:z.getAttribute("data-target"),option:z.getAttribute("data-option")||undefined,secondOption:z.getAttribute("data-second-option")||undefined};y=e.cropped;if(x.method){if(typeof x.target!=="undefined"){v=document.querySelector(x.target);if(!z.hasAttribute("data-option")&&x.target&&v){try{x.option=JSON.parse(v.value)}catch(A){console.log(A.message)}}}switch(x.method){case"rotate":if(y&&d.viewMode>0){e.clear()}break;case"getCroppedCanvas":try{x.option=JSON.parse(x.option)}catch(A){console.log(A.message)}if(t==="image/jpeg"){if(!x.option){x.option={}}x.option.fillColor="#fff"}break}u=e[x.method](x.option,x.secondOption);switch(x.method){case"rotate":if(y&&d.viewMode>0){e.crop()}break;case"scaleX":case"scaleY":z.setAttribute("data-option",-x.option);break;case"getCroppedCanvas":if(u){$("#getCroppedCanvasModal").modal().find(".modal-body").html(u);if(!c.disabled){c.download=o;c.href=u.toDataURL(t)}}break;case"destroy":e=null;if(r){f.revokeObjectURL(r);r="";m.src=l}break}if(typeof u==="object"&&u!==e&&v){try{v.value=JSON.stringify(u)}catch(A){console.log(A.message)}}}};document.body.onkeydown=function(u){var v=u||window.event;if(!e||this.scrollTop>300){return}switch(v.keyCode){case 37:v.preventDefault();e.move(-1,0);break;case 38:v.preventDefault();e.move(0,-1);break;case 39:v.preventDefault();e.move(1,0);break;case 40:v.preventDefault();e.move(0,1);break}};var q=document.getElementById("inputImage");if(f){q.onchange=function(){var v=this.files;var u;if(e&&v&&v.length){u=v[0];if(/^image\/\w+/.test(u.type)){t=u.type;o=u.name;if(r){f.revokeObjectURL(r)}m.src=r=f.createObjectURL(u);e.destroy();e=new n(m,d);q.value=null}else{window.alert("Please choose an image file.")}}}}else{q.disabled=true;q.parentNode.className+=" disabled"}};